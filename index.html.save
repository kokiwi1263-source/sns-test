<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä¿è­·è€…SNSÎ²ç‰ˆ</title>
  <style>
    :root{
      --bg:#f3f4f6;
      --text:#111827;
      --mut:#6b7280;
      --line:#e5e7eb;
      --g1:#c9f6d2;   /* ç·‘å¯„ã‚Š */
      --g2:#a7c7ff;   /* é’å¯„ã‚Š */
      --shadow: 0 10px 22px rgba(0,0,0,.10);
      --r:22px;
    }
    body{ margin:0; font-family:system-ui,-apple-system; background:var(--bg); color:var(--text); }
    .wrap{ max-width:420px; margin:0 auto; padding:18px 16px 96px; }

    /* ä¸Šã®æ™‚é–“/å……é›»ã¯ â€œæã‹ãªã„â€ã€‚ãŸã ã—å®‰å…¨ä½™ç™½ã ã‘ç¢ºä¿ */
    .safeTop{ padding-top: env(safe-area-inset-top); }

    .topbar{
      display:flex; justify-content:space-between; align-items:center;
      padding: 8px 4px 10px;
    }
    .profileBtn{
      width:44px; height:44px; border:none; background:transparent; cursor:pointer;
      font-size:34px; line-height:1;
    }
    h1{
      margin: 18px 0 18px;
      text-align:center;
      font-size:34px;
      font-weight:900;
      letter-spacing:.02em;
    }

    .bigbtn{
      width:100%;
      padding:28px 18px;
      border:none;
      border-radius: var(--r);
      font-size:22px;
      font-weight:900;
      cursor:pointer;
      background: linear-gradient(135deg, var(--g1), var(--g2));
      box-shadow: var(--shadow);
    }
    .sp{ height:18px; }

    .notice{
      margin-top:18px;
      background:#bdbdbd;
      border-radius:14px;
      padding:14px;
      font-weight:800;
      line-height:1.35;
      cursor:pointer;
      user-select:none;
    }

    /* ä¸‹ãƒŠãƒ“ */
    .nav{
      position:fixed; left:0; right:0; bottom:0;
      background:#fff;
      border-top:1px solid var(--line);
      padding:10px 0 calc(10px + env(safe-area-inset-bottom));
      display:flex; justify-content:space-around; align-items:center;
    }
    .nav button{
      border:none; background:transparent; cursor:pointer;
      font-size:40px; line-height:1;
    }
    .nav .active{ outline:3px solid #111; outline-offset:6px; border-radius:12px; }

    /* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆğŸ‘¤ï¼‰ */
    dialog{
      border:none;
      border-radius:16px;
      width:min(420px, 92vw);
      padding:14px;
      box-shadow: var(--shadow);
    }
    .dlgTop{ display:flex; justify-content:space-between; align-items:center; }
    .dlgTitle{ font-weight:900; font-size:16px; }
    .closeBtn{ border:none; background:transparent; cursor:pointer; font-size:18px; }
    .muted{ color:var(--mut); font-size:12px; }
    .linkbtn{
      width:100%;
      padding:12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#fff;
      font-weight:900;
      cursor:pointer;
    }
    .logout{
      border-color:#ef4444;
      color:#ef4444;
    }
  </style>
</head>
<body>
  <div class="safeTop"></div>

  <div class="wrap">
    <div class="topbar">
      <div></div>
      <button class="profileBtn" id="profileBtn" aria-label="profile">ğŸ‘¤</button>
    </div>

    <h1>ä¿è­·è€…SNSÎ²ç‰ˆ</h1>

    <button class="bigbtn" id="goTimeline">ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³</button>
    <div class="sp"></div>
    <button class="bigbtn" id="goRecipe">ãƒ¬ã‚·ãƒ”å…±æœ‰</button>

    <div class="notice" id="goForm">
      ã“ã®ã‚¢ãƒ—ãƒªã«å¯¾ã™ã‚‹æ„è¦‹ã‚„ä¸å…·åˆã®å ±å‘Šã¯<br>ã“ã“ã‚’ã‚¿ãƒƒãƒ—
    </div>
  </div>

  <div class="nav">
    <button id="navHome" class="active" title="home">ğŸ </button>
    <button id="navRecipe" title="recipe">ğŸ²</button>
  </div>

  <dialog id="profileDlg">
    <div class="dlgTop">
      <div class="dlgTitle">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</div>
      <button class="closeBtn" id="closeDlg">âœ•</button>
    </div>
    <div class="muted" id="accName" style="margin-top:8px;"></div>

    <div style="margin-top:12px; display:grid; gap:10px;">
      <button class="linkbtn" id="openTerms" type="button">åˆ©ç”¨è¦ç´„ã‚’è¦‹ã‚‹</button>
      <button class="linkbtn logout" id="logoutBtn" type="button">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
  </dialog>

  <script>
    // ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãªã‘ã‚Œã° auth ã¸
    const me = JSON.parse(localStorage.getItem("sns_user"));
    if (!me?.uid) location.href = "./auth.html";
    document.getElementById("accName").textContent = `ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåï¼š${me.name}`;

    // ç”»é¢é·ç§»
    document.getElementById("goTimeline").onclick = () => location.href = "./timeline.html";
    document.getElementById("goRecipe").onclick  = () => location.href = "./recipe.html";
    document.getElementById("navHome").onclick   = () => location.href = "./index.html";
    document.getElementById("navRecipe").onclick = () => location.href = "./recipe.html";

    // ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆã“ã“ã‚’ã‚¿ãƒƒãƒ—ï¼‰
    document.getElementById("goForm").onclick = () => {
ã€€ã€€ã€€location.href = "https://forms.gle/NCbssBbhx12MSjJg9";

    // ğŸ‘¤
    const dlg = document.getElementById("profileDlg");
    document.getElementById("profileBtn").onclick = () => dlg.showModal();
    document.getElementById("closeDlg").onclick = () => dlg.close();

    document.getElementById("openTerms").onclick = () => location.href = "./terms.html";

    document.getElementById("logoutBtn").onclick = () => {
      localStorage.removeItem("sns_user");
      location.href = "./auth.html";
    };
  </script>
</body>
</html>

